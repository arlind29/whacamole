import solara
import random 

emojis = ["ğ“ƒ¥", "ğ“ƒ ", "ğ“ƒ°", "ğ“ƒ±", "ğ“ƒ¯", "ğ“ƒ­", "ğ“ƒ¸", "ğ“ƒµ", "ğ“ƒ—", "ğ“ƒ˜", "ğ“ƒ™",\
    "ğ“ƒŸ", "ğ“„€", "ğ“„", "ğ“„‚", "ğ“„ƒ", "ğ“ƒš", "ğ“ƒ›", "ğ“ƒœ", "ğ“ƒ", "ğ“ƒ", "ğ“ƒ’",
    "ğ“ƒ“", "ğ“ƒ”", "ğ“ƒ•", "ğ“ƒ–", "ğ“ƒ¡", "ğ“ƒ¢", "ğ“ƒ¦", "ğ“ƒ©", "ğ“ƒ«", "ğ“ƒ¬", "ğ“ƒ®", 
    "ğ“ƒ²", "ğ“ƒ´", "ğ“ƒ¶", "ğ“ƒ·", "ğ“ƒ¹", "ğ“ƒ»", "ğ“ƒ½", "ğ“ƒ¾", "ğ“ƒ¿", "ğ“„„", "ğ“„…", "ğ“„†", 
    "ğ“„‡", "ğ“†‡", "ğ“†ˆ", "ğ“†‰", "ğ“†Œ", "ğ“†", "ğ“†—", "ğ“†˜", "ğ“†™", "ğ“†š", "ğ“†", "ğ“†‘", 
    "ğ“†’", "ğ“†“", "ğ“†”", "ğ“†•", "ğ“†–", "ğ“†Š", "ğ“†", "ğ“†£", "ğ“†¤", "ğ“†¥", "ğ“†¦", "ğ“†§", 
    "ğ“†¨", "ğ“†›", "ğ“†œ", "ğ“†", "ğ“†", "ğ“†Ÿ", "ğ“† ", "ğ“†¡", "ğ“†¢", "ğ“„¿", "ğ“…€", "ğ“…", 
    "ğ“…‚", "ğ“…ƒ", "ğ“…„", "ğ“……", "ğ“…†", "ğ“…‡", "ğ“…ˆ", "ğ“…‰", "ğ“…Š", "ğ“…‹", "ğ“…Œ", "ğ“…", 
    "ğ“…", "ğ“…", "ğ“…", "ğ“…‘", "ğ“…’", "ğ“…“", "ğ“…”", "ğ“…•", "ğ“…–", "ğ“…—", "ğ“…˜", "ğ“…™", 
    "ğ“…š", "ğ“…›", "ğ“…œ", "ğ“…", "ğ“…", "ğ“…Ÿ", "ğ“… ", "ğ“…¡", "ğ“…¢", "ğ“…£", "ğ“…¤", "ğ“…¥", 
    "ğ“…¦", "ğ“…§", "ğ“…¨", "ğ“…©", "ğ“…ª", "ğ“…«", "ğ“…¬", "ğ“…­", "ğ“…®", "ğ“…¯", "ğ“…°", "ğ“…±", 
    "ğ“…²", "ğ“…³", "ğ“…´", "ğ“…µ", "ğ“…¶", "ğ“…·", "ğ“…¸", "ğ“…¹", "ğ“…º", "ğ“…»", "ğ“…¼", "ğ“…½", 
    "ğ“…¾", "ğ“…¿", "ğ“†€", "ğ“†", "ğ“†‚", "ğ“†ƒ", "ğ“††", "ğŸ¦“", "ğŸ¦¬", "ğŸ¦£", "ğŸ¦’", "ğŸ¦¦", "ğŸ¦¥", 
    "ğŸ¦˜", "ğŸ¦Œ", "ğŸ¢", "ğŸ¦", "ğŸ¦­", "ğŸ¦«", "ğŸ†", "ğŸ…", "ğŸ¦", "ğŸ", "ğŸ˜", "ğŸ¦™", "ğŸ«", 
    "ğŸª", "ğŸ", "ğŸ", "ğŸ¦›", "ğŸ¦", "ğŸ‚", "ğŸƒ", "ğŸ", "ğŸ‘", "ğŸ’", "ğŸ¦‡", "ğŸ–", "ğŸ„", 
    "ğŸ›", "ğŸ", "ğŸ¦§", "ğŸ¦", "ğŸœ", "ğŸ", "ğŸŒ", "ğŸ¦‹", "ğŸª³", "ğŸª²", "ğŸª±", "ğŸª°", "ğŸ¦Ÿ", 
    "ğŸ¦‚", "ğŸ•·ï¸", "ğŸ¦—", "ğŸ¨", "ğŸ¯", "ğŸ¦", "ğŸ®", "ğŸ°", "ğŸ»", "ğŸ»â€â„ï¸", "ğŸ¼", "ğŸ¶", "ğŸ±", 
    "ğŸ­", "ğŸ¹", "ğŸ—", "ğŸ´", "ğŸ½", "ğŸ·", "ğŸ£", "ğŸ¥", "ğŸº", "ğŸ¦Š", "ğŸ”", "ğŸ§", "ğŸ¦", 
    "ğŸ¤", "ğŸ‹", "ğŸŠ", "ğŸ¸", "ğŸµ", "ğŸ¡", "ğŸ¬", "ğŸ¦ˆ", "ğŸ³", "ğŸ¦", "ğŸ¦ª", "ğŸ ", "ğŸŸ", 
    "ğŸ™", "ğŸ¦‘", "ğŸ¦", "ğŸ¦€", "ğŸ¦…", "ğŸ•Šï¸", "ğŸ¦ƒ", "ğŸ“", "ğŸ¦‰", "ğŸ¦¤", "ğŸ¦¢", "ğŸ¦†", "ğŸª¶", 
    "ğŸ¦œ", "ğŸ¦š", "ğŸ¦©", "ğŸ©", "ğŸ•â€ğŸ¦º", "ğŸ¦®", "ğŸ•", "ğŸ", "ğŸ€", "ğŸ‡", "ğŸˆ", "ğŸ¦”", "ğŸ¦¡", 
    "ğŸ¦¨", "ğŸ¿ï¸", ]

row_count = 5
col_count= 5

def reset_state(state): 
    """Reset state"""
    for row in state: 
        for cell in row: 
            cell.set("-")
    
def get_init_state(how_many_moles = 0): 
    """
    Get initial game state of a non-started whacamole game
    Args:
        how_many_moles (int, optional): How many moles to include. Defaults to 0.
    Returns:
        (object)): state of the game
    """
    init_matrix = []
    
    for i in range(row_count): 
        row = []
        for j in range(col_count): 
            row.append("-")
        init_matrix.append(row)    

    state = build_state_from_matrix(init_matrix)
    place_moles(state, how_many_moles)
    return state

def build_state_from_matrix(init_matrix): 
    state = []
    for init_row in init_matrix: 
        row = []
        for value in init_row: 
            row.append(solara.reactive(value))
        state.append(row)
    return state    

def place_moles(state, how_many_moles = 0): 
    """Place moles"""
    for _ in range(how_many_moles): 
        row_i = random.randint(0, row_count - 1)
        col_i = random.randint(0, col_count - 1)
        emoji_i = random.randint(0, len(emojis) - 1)
        #print(row_i, col_i, emoji_i)
        state[row_i][col_i].set(emojis[emoji_i])

def refresh_state(state, how_many_moles = 0):
    """Refresh state"""
    for row in state: 
        for cell in row: 
            cell.set("-")
    place_moles(state, how_many_moles)
    